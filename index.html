<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Barrel: Barrel (Work in progress)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="barrel.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Barrel<span id="projectnumber">&#160;v0.1</span>
   </div>
   <div id="projectbrief">C++ wrapper for the Homebrew CLI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Barrel (Work in progress) </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_README"></a> <img src="https://user-images.githubusercontent.com/29029116/182253248-76daa80d-21b9-40bb-aa58-0911973c3330.svg" alt="barrel" style="pointer-events: none;" align="right" width="300" class="inline"/></p>
<h3><a class="anchor" id="autotoc_md1"></a>
[C++ wrapper for the Homebrew CLI]</h3>
<p ><a href="https://github.com/aydwi/barrel"><img src="https://img.shields.io/badge/Source--ffffff?style=social&amp;logo=github" alt="GitHub" class="inline"/></a> <a href="https://twitter.com/intent/tweet?text=Barrel%20-%20A%20C%2B%2B%20wrapper%20for%20the%20Homebrew%20CLI:&amp;url=https%3A%2F%2Fgithub.com%2Faydwi%2Fbarrel"><img src="https://img.shields.io/twitter/url?label=Share&amp;style=social&amp;url=https%3A%2F%2Fgithub.com%2Faydwi%2Fbarrel" alt="Twitter" class="inline"/></a></p>
<p >&#160;</p>
<p >Barrel is a portable, header-only C++ library that provides programmatic access to the <a href="https://brew.sh">Homebrew</a> command line interface.</p>
<p >It is intended to help build generic, non-trivial wrappers around Homebrew. For example, using Barrel, you could write a GUI frontend for Homebrew on macOS. Or it could be used to develop bespoke tooling to customize/automate Homebrew-based package configuration for your CI/CD jobs. Or it could help you work with homebrew on headless systems.</p>
<p ><em>tl;dr: Use Barrel whenever you want to interact with Homebrew and the shell interface just doesn't cut it.</em></p>
<p >Barrel is highly performant, with almost no runtime overhead (<a href="https://github.com/aydwi/barrel/wiki/Benchmarking-%22Homebrew-via-Barrel%22-against-Homebrew">see benchmarks</a>). It exposes a well documented, succinct C++ API (<a href="https://barrel.wiki/barrel_8h.html">see reference</a>) which can be integrated with a wide variety of libraries, tools and frameworks (<a href="https://github.com/aydwi/barrel/wiki">see examples</a>).</p>
<p >&#160;</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Quick example</h1>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;Barrel/barrel.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv) {</div>
<div class="line">    <a class="code hl_class" href="class_brew.html">Brew</a> brew;</div>
<div class="line">    std::cout &lt;&lt; brew.getInstallPath();    <span class="comment">// /usr/local/bin/brew</span></div>
<div class="line">    std::cout &lt;&lt; brew.getInstallVersion(); <span class="comment">// Homebrew 3.5.4</span></div>
<div class="line">    </div>
<div class="line">    <a class="code hl_class" href="class_brew_command.html">BrewCommand&lt;BrewCommandType::Builtin&gt;</a> cmd(brew, BrewCommandType::Builtin::INFO);</div>
<div class="line">    cmd.execute();</div>
<div class="line">    std::cout &lt;&lt; cmd.getExitStatus(); <span class="comment">// 0</span></div>
<div class="line">    std::cout &lt;&lt; cmd.getStreamDump(); <span class="comment">// 120 kegs, 75,556 files, 1.8GB</span></div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aclass_brew_command_html"><div class="ttname"><a href="class_brew_command.html">BrewCommand</a></div><div class="ttdoc">Work with Homebrew commands in your program including set-up, execution and retrieval of the results ...</div><div class="ttdef"><b>Definition:</b> barrel.h:156</div></div>
<div class="ttc" id="aclass_brew_html"><div class="ttname"><a href="class_brew.html">Brew</a></div><div class="ttdoc">Set up a Homebrew execution environment. Further, customize and validate the execution environment.</div><div class="ttdef"><b>Definition:</b> barrel.h:53</div></div>
</div><!-- fragment --><p >This is the "Hello, World!" equivalent of using Barrel. It creates a default <code>brew</code> object to set up Homebrew execution environment, then creates a <code>cmd</code> object to execute the command <code>brew info</code>, and finally prints the exit status and output of the executed command.</p>
<p >&#160;</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Features</h1>
<ul>
<li>Header-only; no need to build before using</li>
<li>Self contained; no external dependencies</li>
<li>Readable, modern C++ source; easy to modify if needed</li>
<li>Negligible runtime overhead</li>
<li>Powerful ways to interact with Homebrew:<ul>
<li>Validate and configure your Homebrew installation</li>
<li>Chain and execute <em>any</em> arbitrary <code>brew</code> command (except those which read from <code>stdin</code> interactively, if any)</li>
<li>Capture exit status, and <code>stdout</code>, <code>stderr</code>, or both</li>
<li><b>[WIP]</b> Execute long running <code>brew</code> commands asynchronously (with support for early binding/delayed invocation); retrieve the results at your convenience without blocking the main thread <sup><a href="https://github.com/aydwi/barrel#1-helpful-for-example-when-writing-a-gui-wrapper-where-you-would-not-want-to-run-a-compute-heavy-routine-on-the-main-thread-to-keep-the-gui-responsive"><b>[1]</b></a></sup></li>
<li><b>[WIP]</b> Live-capture/poll output stream (<code>stdout</code>/<code>stderr</code>) data from a <code>brew</code> command as it is being generated <sup><a href="https://github.com/aydwi/barrel#2-again-helpful-when-writing-an-interactivereal-timegui-wrapper-around-homebrew-anecdotally-i-have-been-using-cakebrew-which-distinctly-lacks-this-functionality-as-of-v13-which-motivated-me-to-start-this-project-in-the-first-place-i-wanted-the-ability-to-see-what-was-going-on-on-stdoutstderr-in-real-time-as-opposed-to-getting-a-bulk-of-text-dumped-at-once-after-the-execution-was-finished-i-like-cakebrew-but-perhaps-i-will-write-my-own-gui-for-homebrew-at-some-point-using-barrel-and-slint"><b>[2]</b></a></sup></li>
<li><b>[WIP]</b> Execute <code>brew</code> commands on multiple threads to seriously cut-down on execution time on multi-core machines</li>
</ul>
</li>
</ul>
<p >&#160;</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Elaborate example</h1>
<p >Now let's take a look at another example which shows how a client can use some of the advanced functionality offered by Barrel.</p>
<div class="fragment"></div><!-- fragment --><p >&#160;</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Project goals and non-goals</h1>
<p ><a href="https://github.com/aydwi/barrel/wiki/Goals-and-Non-goals"><b>See the Wiki</b></a></p>
<p >&#160;</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Requirements</h1>
<p >Barrel is a header-only library, written in <a href="https://en.cppreference.com/w/cpp/20">C++20</a>. Using it can be as simple as copying the <code>include/</code> directory in your project and importing the primary header like <code>"include/barrel.h"</code>. In most cases, however, you'd want to use a build system like <a href="https://www.gnu.org/software/make/">GNU Make</a>/<a href="https://ninja-build.org/">Ninja</a>, and a build automation tool like <a href="https://cmake.org/">CMake</a> to manage building your project.</p>
<p >Further, you need an installation of Homebrew. Barrel does not install Homebrew for you. A <code>brew</code> binary must be available somewhere in your environment before using Barrel, although it is not necessary for it to be present in <code>$PATH</code>.</p>
<h3><a class="anchor" id="autotoc_md7"></a>
Basic requirements</h3>
<ul>
<li>macOS (10.15 or higher)</li>
<li>Homebrew (<a href="https://docs.brew.sh/Installation#macos-requirements">requirements</a>)</li>
<li>A C++ compiler (<a href="https://en.cppreference.com/w/cpp/compiler_support">C++20 or higher</a>) and the accompanying toolchain</li>
</ul>
<h3><a class="anchor" id="autotoc_md8"></a>
Optional requirements</h3>
<ul>
<li>Make</li>
<li>CMake (3.15 or higher)</li>
</ul>
<p >&#160;</p>
<h1><a class="anchor" id="autotoc_md9"></a>
Getting started</h1>
<ol type="1">
<li>Get the source (git clone/<a href="https://github.com/aydwi/barrel/archive/refs/heads/master.zip">download</a> for the latest developmental version, or get a versioned <a href="https://github.com/aydwi/barrel/releases">release</a>)</li>
<li><p class="startli">Build Barrel</p>
<p class="startli"><code>mkdir build &amp;&amp; cd $_</code></p>
<p class="startli"><code>cmake ..</code></p>
<p class="startli"><code>cmake --build . --target install</code></p>
<p class="startli">These steps do the following: <b>1.</b> Create and enter a <code>build</code> directory in the project root, <b>2.</b> Configure the project and prepare a build configuration for the actual build system (Make in my case), and <b>3.</b> Call Make to build Barrel (by compiling/linking however specified), executing the predefined <code>install</code> target to install the library. You should see an <code>install/</code> directory in the project root after step 3. Since Barrel is header-only, all the sources in <code>include/</code> simply <a href="https://github.com/aydwi/barrel/blob/master/CMakeLists.txt#L58">get copied over</a> to <code>install/Barrel/include/</code>.</p>
</li>
</ol>
<p >Alternatively, you can simply <a href="https://github.com/aydwi/barrel/wiki/Getting-a-pre-built-archive-of-Barrel"><b>download a pre-built archive</b></a>.</p>
<p >&#160;</p>
<h1><a class="anchor" id="autotoc_md10"></a>
Linking to Barrel</h1>
<p >Link to Barrel from your project:</p>
<ul>
<li><p class="startli"><ins><b>As an external dependency</b></ins></p>
<p class="startli">Say you have a project you want to include Barrel in, but you do not want to add Barrel to your project's source tree. In this case, you can include Barrel as an external dependency after building it.</p>
<p class="startli">CMake <a href="https://cmake.org/cmake/help/latest/command/find_package.html#find-package"><code>find_package</code></a> makes it straightforward. I have included a simple CMakeLists.txt example you can consult at <a href="https://github.com/aydwi/barrel/blob/master/examples/cmake/external/CMakeLists.txt"><code>examples/external/CMakeLists.txt</code></a>.</p>
</li>
<li><ins><b>As an internal dependency</b></ins></li>
</ul>
<p >&#160;</p>
<h1><a class="anchor" id="autotoc_md11"></a>
Credits</h1>
<ul>
<li>Project Logo: <a href="https://www.vecteezy.com/free-vector/icons">Vecteezy</a></li>
<li>Documentation Generator: <a href="https://doxygen.nl/">Doxygen</a></li>
<li>Documentation Stylesheet: <a href="https://jothepro.github.io/doxygen-awesome-css/">Doxygen Awesome</a></li>
<li>Documentation Host: <a href="https://pages.github.com/">GitHub Pages</a></li>
<li>CI Server: <a href="https://circleci.com/">CircleCI</a></li>
</ul>
<p >&#160;</p>
<h1><a class="anchor" id="autotoc_md12"></a>
Build and test status</h1>
<p ><a href="https://dl.circleci.com/status-badge/redirect/gh/aydwi/barrel/tree/master"><img src="https://dl.circleci.com/status-badge/img/gh/aydwi/barrel/tree/master.svg?style=svg" alt="CircleCI" style="pointer-events: none;" class="inline"/></a></p>
<p >&#160;</p>
<h1><a class="anchor" id="autotoc_md13"></a>
Footnotes</h1>
<h5>[1] Helpful, for example, when writing a GUI wrapper where you would not want to run a compute heavy routine on the main thread.</h5>
<h5>[2] Again, helpful when writing an interactive/real-time/GUI wrapper around Homebrew. Anecdotally, I have been using <a href="https://github.com/brunophilipe/Cakebrew">Cakebrew</a> which distinctly lacks this functionality (as of v1.3), which motivated me to start this project in the first place. I wanted the ability to see what was going on on <code>stdout</code>/<code>stderr</code> in real-time as opposed to getting a bulk of text dumped at once after the execution was finished. I like Cakebrew, but perhaps I will write my own GUI for Homebrew at some point using Barrel and <a href="https://github.com/slint-ui/slint">Slint</a>.</h5>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
